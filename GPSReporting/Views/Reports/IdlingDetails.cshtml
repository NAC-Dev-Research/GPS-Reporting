@model PagedList.IPagedList<GPSReporting.Models.ExcessiveIdling_vw>
@using PagedList.Mvc;
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />

<br />
<br />

<div class="row" align="center">
    <div class="form-group" style="width:25%" align="left">
        @using (Html.BeginForm("IdlingDetails", "Reports", FormMethod.Post))
        {
            <button class="btn btn-outline-primary" name="backToMenu" value="Yes">Back to summary page</button>
            <button class="btn btn-outline-success" name="downReport" value="YES" onclick="GenerateExcel()">Download Report</button>
        }
    </div>
    <div class="form-group" style="width:50%" align="center">
        @using (Html.BeginForm("IdlingDetails", "Reports", FormMethod.Post))
        {
            <button class="btn btn-outline-primary" name="overSpeed" value="Yes">Over speeding</button>
            <button class="btn btn-outline-primary" name="idling" value="Yes">Excessive idling</button>
        }
    </div>
</div>

<div class="row" align="center">
    <div class="form-group" style="width:35%" align="left">
        @using (Html.BeginForm("IdlingDetails", "Reports", FormMethod.Post))
        {
            <button class="btn" style="color:black" disabled>Choose vehicle: </button>
            <select class="form-control btn-outline-primary" name="chosenVehicle" id="chosenVehicle" style="width:15.2rem; height:2rem; text-align:center; display:inline;">
                <option name="chosenVehicle" id="chosenVehicle" style="background-color:white; color:black" value="ALL">All vehicles</option>
                @{
                    if (ViewBag.DMCVehiclesList != null)
                    {
                        foreach (var item in ViewBag.DMCVehiclesList)
                        {
                            string vModel = "- " + item.Text;
                            if (item.Text == "")
                            {
                                vModel = item.Text;
                            }
                            <option name="chosenVehicle" id="chosenVehicle" style="background-color:white; color:black" value="@item.Value">@item.Value @vModel</option>
                        }
                    }
                }
            </select>
            <button class="btn btn-outline-warning" name="sortData" type="submit" value="Yes">Sort</button>
        }
    </div>
    <div class="form-group" style="width:30%" align="center">
        <p align="center"><strong><span style="font-size: 18pt">Excessive idling</span></strong></p>
    </div>
</div>
<table class="taskList" style="width: 98%; border-collapse: collapse" bordercolor="black" cellspacing="0" cellpadding="1" align="center" border="1">
    <tbody>
        <tr style="background-color:#bfffdb">
            <td style="text-align:center" rowspan="1" colspan="8"><strong>Excessive idling violations </strong></td>
        </tr>
        <tr style="background-color: #e1f2d4">
            <td style="text-align:center" width="5%" rowspan="1" colspan="1"><strong>Vehicle</strong></td>
            <td style="text-align:center" width="10%" rowspan="1" colspan="1"><strong>Vehicle Model</strong></td>
            <td style="text-align:center" width="5%" rowspan="1" colspan="1"><strong>Date</strong></td>
            <td style="text-align:center" width="5%" rowspan="1" colspan="1"><strong>Parking Start, hh:mm:ss</strong></td>
            <td style="text-align:center" width="5%" rowspan="1" colspan="1"><strong>Parking End, hh:mm:ss</strong></td>
            <td style="text-align:center" width="40%" rowspan="1" colspan="1"><strong>Address</strong></td>
            <td style="text-align:center" width="5%" rowspan="1" colspan="1"><strong>Parking Duration, hh:mm:ss</strong></td>
            <td style="text-align:center" width="5%" rowspan="1" colspan="1"><strong>Idling Duration, hh:mm:ss</strong></td>
        </tr>
        @{
            foreach (var item in Model)
            {
                <tr>
                    <td style="text-align:center">@Html.DisplayFor(m => item.Header)</td>
                    <td style="text-align:center">@Html.DisplayFor(m => item.VehicleModel)</td>
                    <td style="text-align:center">@item.ReportDateFrom.ToShortDateString()</td>
                    <td style="text-align:center">@Html.DisplayFor(m => item.TripTimeStart)</td>
                    <td style="text-align:center">@Html.DisplayFor(m => item.TripTimeEnd)</td>
                    <td style="text-align:center">@Html.DisplayFor(m => item.Address)</td>
                    <td style="text-align:center">@Html.DisplayFor(m => item.StopDuration)</td>
                    <td style="text-align:center">@Html.DisplayFor(m => item.IdlingDuration)</td>
                </tr>
            }
        }
    </tbody>
</table><br />
<div class="form-group" align="center">
    Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount
    @Html.PagedListPager(Model, page => Url.Action("IdlingDetails", new { page }))
</div>

<div class="form-group" align="left">
    <p align="left" style="margin-top:-2rem"><strong><span style="font-size: 10pt; color:red">NOTE:</span></strong></p>
    <p align="left" style="margin-top:-1rem"><strong><span style="font-size: 10pt;">Parking Start </span></strong> is the start time the vehicle has stop moving</p>
    <p align="left" style="margin-top:-1rem"><strong><span style="font-size: 10pt">Parking End </span></strong> is the end time the vehicle is on stop</p>
    <p align="left" style="margin-top:-1rem"><strong><span style="font-size: 10pt">Parking Duration </span></strong> is the total time length the vehicle is on stop</p>
    <p align="left" style="margin-top:-1rem"><strong><span style="font-size: 10pt">Idling Duration </span></strong> is the total time length the vehicle's engine is on while on stop</p>
</div>

<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<script type="text/javascript">
    function GenerateExcel() {
        window.open("/Reports/CreateExcel");
    }
</script>